(this.webpackJsonpmaze_solver=this.webpackJsonpmaze_solver||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(4),c=n.n(o),l=(n(13),n(1)),i=(n(14),n(2)),u=n(5),s=n(6),m="left",f="right",h="top",d="bottom",b={left:!0,right:!0,bottom:!0,top:!0},v=function(){function e(t,n,a){Object(u.a)(this,e),this._walls={},this._row=0,this._column=0,this._row=t,this._column=n,this._walls=Object(i.a)(Object(i.a)({},b),a)}return Object(s.a)(e,[{key:"isClosed",value:function(){var e=this;return!Object.keys(this._walls).find((function(t){return!e._walls[t]}))}},{key:"breakWall",value:function(e){this._walls[e]=!1}},{key:"breakWallWith",value:function(e){e.row<this.row?(this.breakWall(h),e.breakWall(d)):e.row>this.row?(this.breakWall(d),e.breakWall(h)):e.column<this.column?(this.breakWall(m),e.breakWall(f)):e.column>this.column&&(this.breakWall(f),e.breakWall(m))}},{key:"row",get:function(){return this._row}},{key:"column",get:function(){return this._column}},{key:"walls",get:function(){return Object(i.a)({},this._walls)}}]),e}(),w=function(e,t,n){console.time("findPath");for(var a=e.map((function(e){return e.map((function(e){return{block:e,coveredDistance:0}}))})),r=[a[t.row][t.column]],o=[],c=[],l=function(){var e=r.pop();if(!e)return"break";var t=e.block;if(e.visited=!0,o.push(t),t.row===n.row&&t.column===n.column){var l=e;do{c.push(l.block),l=l.previous}while(l);return"break"}var i=Object.keys(t.walls).filter((function(e){return!1===t.walls[e]})).map((function(e){return k(e,a,t.row,t.column)})).filter((function(e){return!e.visited})).map((function(t){return t.coveredDistance=e.coveredDistance+1,t.estimatedDistance=p(t.block,n),t.previous=e,t}));r=r.concat(i).sort((function(e,t){return e.coveredDistance+e.estimatedDistance>t.coveredDistance+t.estimatedDistance?-1:e.coveredDistance+e.estimatedDistance<t.coveredDistance+t.estimatedDistance?1:0}))};;){if("break"===l())break}return console.timeEnd("findPath"),{visited:o,path:c}},p=function(e,t){return Math.sqrt(Math.pow(t.row-e.row,2)+Math.pow(t.column-e.column,2))},k=function(e,t,n,a){switch(e){case h:return t[n-1][a];case d:return t[n+1][a];case m:return t[n][a-1];default:return t[n][a+1]}},g=n(7),O=n.n(g),j=function(e){var t=e.block,n=e.onClick,a=e.highlight,o=e.path,c=e.start,l=e.end,i=e.onMouseOver,u=Object.keys(t.walls).filter((function(e){return t.walls[e]})).join(" ");return r.a.createElement("div",{className:"block ".concat(O()({highlight:a,path:o,start:c,end:l})),onClick:n,onMouseOver:i},r.a.createElement("div",{className:u}))},E=function(e){var t=e.maze,n=e.showVisited,o=Object(a.useState)([]),c=Object(l.a)(o,2),i=c[0],u=c[1],s=Object(a.useState)([]),m=Object(l.a)(s,2),f=m[0],h=m[1],d=Object(a.useState)(null),b=Object(l.a)(d,2),v=b[0],p=b[1],k=Object(a.useState)(null),g=Object(l.a)(k,2),O=g[0],E=g[1],y=function(){p(null),E(null),u([]),h([])};return Object(a.useEffect)((function(){y()}),[t]),r.a.createElement("div",{className:"maze"},t&&t.map((function(e,a){return r.a.createElement("div",{key:"line-".concat(a),className:"row"},e.map((function(e,o){return r.a.createElement(j,{block:e,key:"block-".concat(a,"-").concat(o),highlight:n&&i.indexOf(e)>=0,path:f.indexOf(e)>=0,start:v&&e.row===v.row&&e.column===v.column,end:O&&e.row===O.row&&e.column===O.column,onClick:function(){y(),p({row:a,column:o})},onMouseOver:function(){if(v&&v.row!==a&&v.column!==o){E({row:a,column:o});var e=w(t,v,{row:a,column:o});u(e.visited),h(e.path)}}})})))})))},y=function(e){var t=e.maze,n=e.showVisited,o=Object(a.useState)([]),c=Object(l.a)(o,2),i=c[0],u=c[1],s=Object(a.useState)([]),b=Object(l.a)(s,2),v=b[0],p=b[1],k=Object(a.useState)(null),g=Object(l.a)(k,2),O=g[0],j=g[1],E=Object(a.useState)(null),y=Object(l.a)(E,2),x=y[0],C=y[1],S=Object(a.useState)(null),W=Object(l.a)(S,2),D=W[0],M=W[1],_=Object(a.useRef)(null),z=function(){j(null),C(null),u([]),p([]);var e=_.current;e.getContext("2d").clearRect(0,0,e.width,e.height)},I=function(e,t,n){e.fillStyle=t,e.fillRect(20*n.column,20*n.row,20,20)};Object(a.useEffect)((function(){z(),function(){var e=_.current,n=e.getContext("2d");t.forEach((function(e){e.forEach((function(e){var t={x:20*e.column,y:20*e.row};n.beginPath(),e.walls[m]&&(n.moveTo(t.x,t.y),n.lineTo(t.x,t.y+20)),e.walls[f]&&(n.moveTo(t.x+20,t.y),n.lineTo(t.x+20,t.y+20)),e.walls[h]&&(n.moveTo(t.x,t.y),n.lineTo(t.x+20,t.y)),e.walls[d]&&(n.moveTo(t.x,t.y+20),n.lineTo(t.x+20,t.y+20)),n.stroke()}))}));var a=new Image;a.src=e.toDataURL("image/png"),M(a)}()}),[t]),Object(a.useEffect)((function(){console.time("rendering");var e=_.current,t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),x&&I(t,"red",x),n&&i.forEach((function(e){I(t,"lightskyblue",e)})),v.forEach((function(e){I(t,"pink",e)})),O&&I(t,"green",O),x&&I(t,"red",x),D&&t.drawImage(D,0,0),console.timeEnd("rendering")}),[O,x,v,n]);return r.a.createElement("div",null,r.a.createElement("canvas",{ref:_,className:"maze",width:20*t.length,height:20*t.length,onClick:function(e){var t=_.current.getBoundingClientRect(),n=parseInt((e.clientX-t.x)/20),a=parseInt((e.clientY-t.y)/20);z(),j({row:a,column:n})},onMouseMove:function(e){var n=_.current.getBoundingClientRect(),a=parseInt((e.clientX-n.x)/20),r=parseInt((e.clientY-n.y)/20);if(O&&O.row!==r&&O.column!==a){C({row:r,column:a});var o=w(t,O,{row:r,column:a});u(o.visited),p(o.path)}}}))},x=function(e){return Math.floor(Math.random()*e)},C=function(e,t,n){return[{row:e-1,column:t},{row:e,column:t-1},{row:e,column:t+1},{row:e+1,column:t}].filter((function(e){var t=e.row,a=e.column;return t>=0&&t<n.length&&a>=0&&a<n.length})).map((function(e){var t=e.row,a=e.column;return n[t][a]})).filter((function(e){return e}))},S=function(e){console.time("maze generation");for(var t,n=new Array(e).fill(0).map((function(t,n){return new Array(e).fill(0).map((function(e,t){return{block:new v(n,t),visited:!1}}))})),a=[n[x(n.length)][x(n.length)]];;){var r=a.pop();if(!r)break;r.visited=!0;var o=r.block,c=C(o.row,o.column,n).filter((function(e){return!e.visited})),l=0===(t=c).length?null:t[Math.floor(Math.random()*t.length)];l&&(a.push(r),a.push(l),r.block.breakWallWith(l.block))}return console.timeEnd("maze generation"),n.map((function(e){return e.map((function(e){return e.block}))}))};var W=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(!1),i=Object(l.a)(c,2),u=i[0],s=i[1],m=Object(a.useState)("canvas"),f=Object(l.a)(m,2),h=f[0],d=f[1],b=Object(a.useRef)();return Object(a.useEffect)((function(){o(S(20))}),[]),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"input-group"},"Maze Size: ",r.a.createElement("input",{ref:b}),r.a.createElement("button",{onClick:function(){parseInt(b.current.value)&&parseInt(b.current.value)<=1e3&&o(S(parseInt(b.current.value)))}},"Generate")),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",null,"Show visited"),r.a.createElement("input",{type:"checkbox",onChange:function(e){return s(e.target.checked)}})),r.a.createElement("div",{className:"input-group"},r.a.createElement("span",null,"Render method"),r.a.createElement("input",{type:"radio",name:"renderer",checked:"canvas"===h,onChange:function(e){return d("canvas")}}),r.a.createElement("label",null,"Canvas"),r.a.createElement("input",{type:"radio",name:"renderer",checked:"dom"===h,onChange:function(e){return d("dom")}}),r.a.createElement("label",null,"DOM")),n?"dom"===h?r.a.createElement(E,{maze:n,showVisited:u}):r.a.createElement(y,{maze:n,showVisited:u}):null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.3ed5708b.chunk.js.map